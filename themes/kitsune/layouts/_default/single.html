{{ define "main" }}
    <div class="content">
        {{ partial "post_metadata.html" . }}

        {{ if (.Params.Toc | default .Site.Params.Toc) }}
        <div class="table-of-contents">
            <h2>
                {{ (.Params.TocTitle | default .Site.Params.TocTitle) | default "Table of Contents" }}
            </h2>
            {{ .TableOfContents }}
        </div>
        {{ end }}

        {{- with .Content -}}
            <div>
                <!-- Inject links into the heading tags -->
                {{ . | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)" `${1}<a href="#${2}" class="hanchor"
                        ariaLabel="Anchor">&#8983;</a> ${3}` | safeHTML }}
            </div>
        {{- end -}}
    </div>
{{ end }}